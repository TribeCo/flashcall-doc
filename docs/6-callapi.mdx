---
sidebar_position: 1
---


import CodeSample from '../src/components/CodeSample/CodeSample.tsx';

# راهنمای درخواست برقراری تک‌زنگ (Call API)

برای برقراری تماس از طریق سرویس فلش‌کال، نیاز است که درخواستی از نوع POST به آدرس URL مشخص شده زده شود. بدنه این درخواست باید به صورتی که در ادامه مشاهده خواهید کرد باشد و ضمنا توضیحات بدنه پاسخی که از طرف ما داده می‌شود هم جلوتر شرح داده خواهد شد.

# آدرس درخواست

با ایجاد درخواست POST به آدرس URL زیر، به شماره تلفنی که همراه بدنه درخواست ارسال می‌کنید، تک‌زنگ زده خواهد شد:

<div style={{ textAlign: "left" }}>
  flash-call2.liara.run/services/call/call/
</div>

# بدنه درخواست (Request Body)

در بدنه درخواست، شماره تلفن مقصد به همراه کلید دسترسی را به فرمت زیر قرار دهید.

<div>
  <img src="https://i.imgur.com/XUFIKjI.png" />
</div>
# مقصد (destination):
شماره تلفن کاربری است که می‌خواهید به او تک‌زنگ زده شود
# توکن (token) :
کلید دسترسی مربوط به سرویسی است که برای تماس استفاده می‌کنید

توجه: اگر چندین سرویس با کانفیگ های مختلف دارید مطمئن شوید کلید دسترسی که قرار می‌دهید، کلید ساخته شده از همان سرویسی باشد که می‌خواهید تماس با آن برقرار شود.

# بدنه پاسخ (Response Body)

پاسخی که بعد از درخواست زدن دریافت خواهید کرد به فرمت زیر است:

<div>
  <img src="https://i.imgur.com/WZC7xqI.png" />
</div>

# پیام (message) :

<div>
   اعلام می‌کند که وضعیت درخواست شما چگونه بوده است. اگر موفق باشد، پیغام "درخواست با موفقیت انجام شد" را دریافت خواهید کرد، در غیر این صورت خطایی در ارسال درخواست‌تان وجود دارد. برای دیدن شرح خطاهای مختلف، قسمت
  <a href="#error-management"><span style={{color: "blue"}}>مدیریت خطاها</span></a>
  را مشاهده کنید.
</div>

# کد (code) :

کدی است که کاربر باید وارد کند (در اصل همان n رقم انتهایی شماره تلفنی است که به کاربر تک‌زنگ زده است)

# کد پیگیری (tracking_code) :

<div id="error-management">
 جهت متمایز سازی درخواست های سرور و ضمنا پیگیری تماس‌ها در گزارش‌های آینده به کار می رود
 </div>

# سر‌شماره (head_number) :

ارقام ابتدایی شماره تلفنی که با کاربر تماس گرفته را نشان می‌دهد.

# مدیریت خطاها

در صورت بروز خطا در فرایند درخواست تماس، شرح خطای ایجاد شده در فیلد message از پاسخ دریافتی قابل مشاهده است. این خطا می تواند به دلیل عواملی از سمت شما مثل اشتباه وارد کردن، منقضی بودن یا غیرفعال بودن کلید دسترسی باشد که در هر کدام از این حالات، پیام مناسب برای فهمیدن علت خطا گزارش می‌شود. همچنین خطا می‌تواند گاهی عامل سمت سرور داشته باشد که در اینگونه مواقع پیغام "درخواست دچار خطا شد" را دریافت خواهید کرد.

# نمونه کد

در زیر یک نمونه کد ساده به زبان پایتون برای مثال قرار داده شده است که در آن به api تماس فلش‌کال درخواست زده می‌شود. بسته به زبان برنامه نویسی و پلتفرمی که توسعه می‌دهید، سینتکس کد شما ممکن است متفاوت باشد اما منطق کلی آن از کد زیر تبعیت خواهد کرد:

<CodeSample code={'import requests url = "https://flash-call2.liara.run/services/call/call/" payload = { "destination": "09123456789", "token": "YOUR_ACCESS_TOKEN" } response = requests.post(url, json=payload) print(response.json())'} language = "python" />
